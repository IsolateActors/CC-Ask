/* ==== 响应式设计 ==== */

/* 平板设备 (768px - 1024px) */
@media (max-width: 1024px) {
    :root {
        --sidebar-width: 280px;
        --content-max-width: 100%;
    }
    
    .content-container {
        padding: var(--spacing-xl) var(--spacing-md);
    }
    
    .nav-container {
        padding: 0 var(--spacing-md);
    }
    
    .floating-toolbar {
        bottom: var(--spacing-lg);
        right: var(--spacing-lg);
    }
    
    .template-panel, .search-panel {
        width: 350px;
        right: -350px;
    }
}

/* 移动设备 (最大768px) */
@media (max-width: 768px) {
    :root {
        --nav-height: 56px;
        --sidebar-width: 100%;
        --spacing-md: 0.75rem;
        --spacing-lg: 1rem;
        --spacing-xl: 1.5rem;
        --spacing-2xl: 2rem;
    }
    
    /* 导航栏移动端适配 */
    .nav-container {
        padding: 0 var(--spacing-md);
    }
    
    .nav-brand h1 {
        font-size: 1.125rem;
    }
    
    .nav-toggle {
        display: flex;
        order: -1;
    }
    
    .nav-actions {
        gap: var(--spacing-sm);
    }
    
    .templates-btn {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }
    
    .templates-btn {
        display: none; /* 在移动端隐藏，使用浮动按钮代替 */
    }
    
    /* 侧边栏移动端适配 */
    .sidebar {
        width: var(--sidebar-width);
        transform: translateX(-100%);
        box-shadow: none;
    }
    
    .sidebar.active {
        transform: translateX(0);
        box-shadow: var(--shadow-lg);
    }
    
    .sidebar-close {
        display: block;
    }
    
    .toc-container {
        padding: var(--spacing-sm);
    }
    
    .toc-title {
        font-size: 0.9rem;
        padding: var(--spacing-sm);
    }
    
    .toc-link {
        padding: 0.5rem var(--spacing-sm);
        font-size: 0.85rem;
    }
    
    /* 主内容移动端适配 */
    .main-content {
        margin-left: 0;
        margin-top: var(--nav-height);
    }
    
    .content-container {
        padding: var(--spacing-lg) var(--spacing-md);
    }
    
    /* Markdown内容移动端适配 */
    #markdownContent h1 {
        font-size: 1.875rem;
        margin-bottom: var(--spacing-lg);
        line-height: 1.3;
    }
    
    #markdownContent h2 {
        font-size: 1.5rem;
        margin-top: var(--spacing-xl);
        margin-bottom: var(--spacing-md);
    }
    
    #markdownContent h3 {
        font-size: 1.25rem;
        margin-top: var(--spacing-lg);
        margin-bottom: var(--spacing-sm);
    }
    
    #markdownContent h4 {
        font-size: 1.125rem;
        margin-top: var(--spacing-md);
        margin-bottom: var(--spacing-sm);
    }
    
    #markdownContent p {
        margin-bottom: var(--spacing-sm);
        line-height: 1.6;
    }
    
    #markdownContent blockquote {
        margin: var(--spacing-md) 0;
        padding: var(--spacing-sm);
        font-size: 0.9rem;
    }
    
    /* 代码块移动端优化 */
    .code-container {
        margin: var(--spacing-md) 0;
        border-radius: 0.375rem;
    }
    
    .code-header {
        padding: var(--spacing-sm);
        flex-direction: column;
        gap: var(--spacing-xs);
        align-items: flex-start;
    }
    
    .copy-btn {
        font-size: 0.7rem;
        padding: 0.3rem 0.6rem;
        align-self: flex-end;
        margin-top: var(--spacing-xs);
    }
    
    #markdownContent pre {
        padding: var(--spacing-sm);
        font-size: 0.8rem;
        overflow-x: auto;
        /* 确保代码在移动端可以滚动 */
        -webkit-overflow-scrolling: touch;
    }
    
    #markdownContent code {
        font-size: 0.8rem;
        word-break: break-all;
    }
    
    /* 表格移动端适配 */
    #markdownContent table {
        font-size: 0.875rem;
        min-width: 100%;
        /* 表格水平滚动 */
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }
    
    #markdownContent th,
    #markdownContent td {
        padding: var(--spacing-sm);
        min-width: 120px;
    }
    
    
    .checklist li {
        padding: var(--spacing-xs);
        margin-bottom: var(--spacing-xs);
        font-size: 0.9rem;
    }
    
    /* 浮动工具栏移动端适配 */
    .floating-toolbar {
        bottom: var(--spacing-md);
        right: var(--spacing-md);
    }
    
    .fab-btn {
        width: 48px;
        height: 48px;
        font-size: 1.1rem;
        margin-bottom: var(--spacing-xs);
    }
    
    /* 面板移动端适配 */
    .template-panel, .search-panel {
        width: 100%;
        right: -100%;
    }
    
    .panel-header {
        padding: var(--spacing-md);
    }
    
    .panel-header h3 {
        font-size: 1rem;
    }
}

/* 小屏幕移动设备 (最大480px) */
@media (max-width: 480px) {
    :root {
        --spacing-sm: 0.375rem;
        --spacing-md: 0.5rem;
        --spacing-lg: 0.75rem;
        --spacing-xl: 1rem;
        --spacing-2xl: 1.5rem;
    }
    
    .nav-brand h1 {
        font-size: 1rem;
    }
    
    .version-badge {
        font-size: 0.7rem;
        padding: 0.2rem 0.4rem;
    }
    
    
    .content-container {
        padding: var(--spacing-md);
    }
    
    #markdownContent h1 {
        font-size: 1.625rem;
        line-height: 1.2;
    }
    
    #markdownContent h2 {
        font-size: 1.375rem;
    }
    
    #markdownContent h3 {
        font-size: 1.125rem;
    }
    
    #markdownContent h4 {
        font-size: 1rem;
    }
    
    #markdownContent p,
    #markdownContent li {
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .code-header {
        font-size: 0.8rem;
    }
    
    #markdownContent pre {
        font-size: 0.75rem;
    }
    
    .copy-btn {
        font-size: 0.65rem;
        padding: 0.25rem 0.5rem;
    }
    
    .floating-toolbar {
        bottom: var(--spacing-sm);
        right: var(--spacing-sm);
    }
    
    .fab-btn {
        width: 44px;
        height: 44px;
        font-size: 1rem;
    }
    
    
    .checklist li {
        font-size: 0.85rem;
    }
}

/* 超大屏幕 (1440px+) */
@media (min-width: 1440px) {
    :root {
        --content-max-width: 900px;
        --sidebar-width: 320px;
    }
    
    .nav-container {
        max-width: 1600px;
    }
    
    .content-container {
        padding: var(--spacing-2xl) var(--spacing-xl);
    }
    
    #markdownContent h1 {
        font-size: 2.5rem;
    }
    
    #markdownContent h2 {
        font-size: 2rem;
    }
    
    #markdownContent h3 {
        font-size: 1.625rem;
    }
    
    #markdownContent p,
    #markdownContent li {
        font-size: 1.05rem;
        line-height: 1.8;
    }
    
    .toc-title {
        font-size: 0.95rem;
    }
    
    .toc-link {
        font-size: 0.875rem;
    }
}

/* 高分辨率屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .fab-btn {
        box-shadow: 0 8px 16px -4px rgb(0 0 0 / 0.12);
    }
    
    .copy-btn {
        box-shadow: 0 2px 4px -1px rgb(0 0 0 / 0.06);
    }
    
    .template-panel, .search-panel {
        box-shadow: -8px 0 32px -8px rgb(0 0 0 / 0.12);
    }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
    .toc-link,
    .copy-btn,
    .fab-btn,
    .panel-close {
        min-height: 44px;
        min-width: 44px;
    }
    
    .toc-link {
        padding: 0.625rem var(--spacing-sm);
        margin-bottom: 0.25rem;
    }
    
    .copy-btn {
        padding: 0.625rem 1rem;
    }
    
    /* 移除hover效果，使用active状态 */
    .toc-link:hover,
    .copy-btn:hover,
    .fab-btn:hover {
        transform: none;
    }
    
    .toc-link:active,
    .copy-btn:active,
    .fab-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }
}

/* 深色模式支持 (可选) */
@media (prefers-color-scheme: dark) {
    :root {
        --text-primary: #f8fafc;
        --text-secondary: #cbd5e1;
        --text-muted: #94a3b8;
        --text-inverse: #1e293b;
        
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --bg-code: #1e293b;
        
        --border-light: #334155;
        --border-medium: #475569;
        --border-dark: #64748b;
    }
    
    .main-nav {
        background: var(--bg-primary);
        border-bottom-color: var(--border-light);
    }
    
    .sidebar {
        background: var(--bg-secondary);
        border-right-color: var(--border-light);
    }
    
    .loading-spinner {
        border-color: var(--border-light);
        border-top-color: var(--primary-color);
    }
}

/* 减少动画效果 (可访问性) */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    html {
        scroll-behavior: auto;
    }
    
    .loading-spinner {
        animation: none;
        border-top-color: var(--primary-color);
    }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
    :root {
        --primary-color: #0066cc;
        --border-light: #333333;
        --border-medium: #666666;
        --text-secondary: #000000;
    }
    
    .copy-btn,
    .fab-btn {
        border: 2px solid var(--text-primary);
    }
    
    .toc-link.active {
        border: 2px solid var(--primary-color);
    }
}